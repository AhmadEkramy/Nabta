# ูุธุงู ุงูู Streak (ุงูุณูุณูุฉ) - Streak System

## ุงูุชุบููุฑุงุช ุงูุชู ุชู ุฅุฌุฑุงุคูุง

### 1. ุฅุถุงูุฉ ุญูู `lastActiveDate` ูู User Types
- ุชู ุฅุถุงูุฉ `lastActiveDate?: string` ูู `src/types/index.ts`
- ูุฎุฒู ุขุฎุฑ ุชุงุฑูุฎ ูุดุงุท ูููุณุชุฎุฏู ุจุตูุบุฉ YYYY-MM-DD

### 2. ุฏูุงู ุฌุฏูุฏุฉ ูู `src/firebase/userProfile.ts`

#### `checkAndUpdateStreak(userId: string)`
ูุฐู ุงูุฏุงูุฉ ุชุชุญูู ูู ุขุฎุฑ ูุดุงุท ูููุณุชุฎุฏู ูุชุญุฏุซ ุงูู Streak ุชููุงุฆููุง:

**ุงูุณููุงุฑูููุงุช:**
- **ุฃูู ูุดุงุท ูููุณุชุฎุฏู**: ูุชู ุชุนููู streak = 1
- **ูุดุงุท ูู ููุณ ุงูููู**: ูุง ูุชู ุงูุชุญุฏูุซุ ูุจูู ุงูู streak ููุง ูู
- **ูุดุงุท ูู ุงูููู ุงูุชุงูู ูุจุงุดุฑุฉ**: ูุชู ุฒูุงุฏุฉ ุงูู streak ุจููุฏุงุฑ 1
- **ูุดุงุท ุจุนุฏ ุฃูุซุฑ ูู ููู**: ูุชู ุฅุนุงุฏุฉ ุชุนููู ุงูู streak ุฅูู 1 (ูุณุฑ ุงูุณูุณูุฉ)

**ุงูุฅุฑุฌุงุน:**
```typescript
{
  streak: number,      // ุงูู streak ุงูุญุงูู
  isNewDay: boolean    // ูู ุชู ุชุญุฏูุซ ุงูู streak (ููู ุฌุฏูุฏ)
}
```

### 3. ุชุญุฏูุซุงุช ูู `src/contexts/AuthContext.tsx`
- ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ูุชู ุงูุชุญูู ูู ุงูู Streak ุชููุงุฆููุง
- ูุชู ุชุญุฏูุซ ุงูู streak ุฅุฐุง ูุงู ููู ุฌุฏูุฏ
- ูุชู ุญูุธ `lastActiveDate` ุนูุฏ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ

### 4. ุชุญุฏูุซุงุช ูู `src/contexts/GameContext.tsx`

#### `updateStreak()`
- ุงูุขู ุชุณุชุฎุฏู `checkAndUpdateStreak()` ุจุฏูุงู ูู ุงูุฒูุงุฏุฉ ุงููุฏููุฉ
- ุชุนุทู ููุงูุขุช XP ุนูุฏ ุงูุญูุงุธ ุนูู ุงูู streak
- ุชุนุฑุถ ุฑุณุงุฆู ุฎุงุตุฉ ุนูุฏ ุงููุตูู ูุฅูุฌุงุฒุงุช ูุนููุฉ:
  - 7 ุฃูุงู: "๐ 7-day streak! You're on fire!"
  - 30 ููู: "๐ 30-day streak! Incredible dedication!"
  - 100 ููู: "๐ 100-day streak! You're a legend!"

#### ุงูุฏูุงู ุงูุชู ุชุญุฏุซ ุงูู Streak ุชููุงุฆููุง:
- `markVerseRead()` - ุนูุฏ ูุฑุงุกุฉ ุขูุฉ
- `completeTask()` - ุนูุฏ ุฅููุงู ูููุฉ
- `addFocusTime()` - ุนูุฏ ุฅุถุงูุฉ ููุช ุชุฑููุฒ

## ููููุฉ ุนูู ุงููุธุงู

### 1. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
```
ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
  โ
AuthContext ูุชุญูู ูู ุขุฎุฑ ูุดุงุท
  โ
ุฅุฐุง ูุงู ููู ุฌุฏูุฏ:
  - ุฅุฐุง ูุฑ ููู ูุงุญุฏ ููุท: streak + 1
  - ุฅุฐุง ูุฑ ุฃูุซุฑ ูู ููู: streak = 1
  โ
ุชุญุฏูุซ ุงูุจูุงูุงุช ูู Firestore
  โ
ุนุฑุถ ุงูู streak ุงูุฌุฏูุฏ ูููุณุชุฎุฏู
```

### 2. ุนูุฏ ุฃู ูุดุงุท ูููู
```
ุงููุณุชุฎุฏู ูููู ุจูุดุงุท (ูุฑุงุกุฉุ ูููุฉุ ุชุฑููุฒ)
  โ
GameContext ูุชุญูู ูู ุงูู Streak
  โ
ุฅุฐุง ูุงู ููู ุฌุฏูุฏ:
  - ุชุญุฏูุซ ุงูู streak
  - ุฅุนุทุงุก +10 XP
  - ุนุฑุถ ุฑุณุงูุฉ ุชุญููุฒูุฉ
  โ
ุชุญุฏูุซ ุงูุจูุงูุงุช
```

## ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู

```typescript
import { checkAndUpdateStreak } from '../firebase/userProfile';

// ูู ุฃู ููุงู ุชุฑูุฏ ุชุญุฏูุซ ุงูู streak
const result = await checkAndUpdateStreak(userId);

if (result.isNewDay) {
  console.log(`๐ฅ Streak updated to: ${result.streak}`);
  // ุฃุนุท ุงููุณุชุฎุฏู ููุงูุฃุฉ
  await addXP(10, `Daily streak: ${result.streak} days!`);
}
```

## ุงูููุงุฆุฏ

1. โ **ุชููุงุฆู**: ุงูู streak ูุชุญุฏุซ ุชููุงุฆููุง ุจุฏูู ุชุฏุฎู ูุฏูู
2. โ **ุฏููู**: ูุชุนุงูู ูุน ุฌููุน ุงูุณููุงุฑูููุงุช (ููุณ ุงููููุ ููู ุชุงููุ ุงููุทุงุน)
3. โ **ูุญูุฒ**: ุฑุณุงุฆู ูุฅูุฌุงุฒุงุช ุฎุงุตุฉ ุชุญูุฒ ุงููุณุชุฎุฏู
4. โ **ูุชูุงูู**: ูุนูู ูุน ุฌููุน ุงูุฃูุดุทุฉ (ูุฑุงุกุฉุ ููุงูุ ุชุฑููุฒ)
5. โ **ุขูู**: ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ

## ุงุฎุชุจุงุฑ ุงููุธุงู

### ุณููุงุฑูู 1: ูุณุชุฎุฏู ุฌุฏูุฏ
- ุงูููู ุงูุฃูู: streak = 1
- lastActiveDate = ุงูููู

### ุณููุงุฑูู 2: ูุณุชุฎุฏู ููุชุธู
- ุงูููู 1: streak = 1
- ุงูููู 2: streak = 2
- ุงูููู 3: streak = 3

### ุณููุงุฑูู 3: ูุณุชุฎุฏู ููุณุฑ ุงูู streak
- ุงูููู 1: streak = 5
- (ูุง ูุดุงุท ูู ุงูููู 2)
- ุงูููู 3: streak = 1 (ุฅุนุงุฏุฉ ุชุนููู)

### ุณููุงุฑูู 4: ููุณ ุงูููู
- ุงููุดุงุท ุงูุฃูู: streak ูุชุญุฏุซ
- ุงููุดุงุท ุงูุซุงูู: streak ูุจูู ููุง ูู (ูุง ุชุญุฏูุซ)

## ููุงุญุธุงุช ูููุฉ

1. ุงูู streak ูุชู ุญุณุงุจู ุจูุงุกู ุนูู ุงูุฃูุงู ุงููููุงุฏูุฉ (YYYY-MM-DD)
2. ูุชู ุงูุชุญุฏูุซ ุนูุฏ ุฃู ูุดุงุท (ููุณ ููุท ุชุณุฌูู ุงูุฏุฎูู)
3. ุงููุธุงู ูุนูู ุญุชู ูู ูุงู ุงููุณุชุฎุฏู ูู ููุทูุฉ ุฒูููุฉ ูุฎุชููุฉ
4. ูุชู ุญูุธ ุฌููุน ุงูุชุญุฏูุซุงุช ูู Firestore ุชููุงุฆููุง

